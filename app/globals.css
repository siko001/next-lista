@import "tailwindcss";

:root {
    --font-quicksand: "Quicksand", sans-serif;
    --font-saira: "Saira", sans-serif;
    --color-primary: #21ba9c;

    /* Prevent transitions during initial page load */
    html.theme-loading,
    html.theme-loading *,
    html.theme-loading *:before,
    html.theme-loading *:after {
        transition: none !important;
        animation: none !important;
    }

    /* System theme - used as fallback */
    --background: #f8f8ff;
    --foreground: #171717;
}

/* Light theme */
:root,
.light,
.light-mode {
    --background: #f8f8ff;
    --foreground: #171717;
    --drag: oklch(92.8% 0.006 264.531);
    --hover: #f8f8ff;
    --custom-text-color: #0a0a0a;
    --custom-text-color-lighter: var(--color-gray-600);
    --hidden-bg: #f8f8ff;
    --tools: var(--color-gray-200);
    --product-item: var(--color-gray-100);
    --product-item-hover: var(--color-gray-300);
    --ai-chat: var(--color-gray-600);
    --drag-opage: oklch(92.8% 0.006 264.531 / 0.7);
    --menu-bg: var(--color-gray-400);
    --menu-bg-hover: var(--color-gray-500);
    --search-input: var(--color-gray-300);
    --filters: var(--color-gray-200);
    --filters-hover: var(--color-primary);
    --filters-text: var(--color-gray-700);
    --filters-wrapper: var(--color-white);
    --user-settings: var(--color-gray-200);
}

/* Dark theme */
.dark,
.dark-mode {
    --background: #0a0a0a;
    --foreground: #ededed;
    --drag: oklch(21% 0.034 264.665);
    --hover: #0a0a0a;
    --custom-text-color: #ededed;
    --custom-text-color-lighter: var(--color-gray-300);
    --hidden-bg: #0a0a0a;
    --tools: var(--color-gray-700);
    --product-item: var(--color-gray-800);
    --product-item-hover: var(--color-gray-700);
    --ai-chat: var(--color-gray-900);
    --drag-opage: oklch(21% 0.034 264.665 / 0.7);
    --menu-bg: var(--color-gray-900);
    --menu-bg-hover: var(--color-gray-600);
    --search-input: var(--color-gray-700);
    --filters: var(--color-gray-800);
    --filters-hover: var(--color-gray-700);
    --filters-text: var(--color-gray-300);
    --filters-wrapper: var(--color-gray-900);
    --chat-widget-hover: var(--color-primary);
    --user-settings: var(--color-gray-900);
}

/* Smooth transitions for theme changes */
html:not(.theme-loading) {
    transition: background-color 0.2s ease, color 0.2s ease;
}
.bg-primary {
    background-color: var(--color-primary);
}

.user-settings-button {
    border-color: var(--color-primary);
}

.drag {
    background-color: var(--drag);
}
.shopping-list-hover:hover {
    background-color: var(--hover);
}

.custom-text-color {
    color: var(--custom-text-color);
}

.custom-text-color-lighter {
    color: var(--custom-text-color-lighter);
}
.brand-color {
    color: var(--color-primary);
}
.brand-color:hover {
    color: var(--custom-text-color);
}
.brand-color.hover:hover {
    color: var(--color-primary);
    opacity: 0.8;
}

.username:hover {
    border-color: #21ba9c !important;
}

.shopping-list-header {
    background-color: var(--drag);
}

.hidden-bg {
    background-color: var(--hidden-bg);
}

.product-item {
    background-color: var(--product-item);
}

.product-item:hover {
    background-color: var(--product-item-hover);
}

.product-item.bagged-product {
    border: 2px solid var(--color-primary);
}

.tools {
    background-color: var(--tools);
}

.tools .tool {
    color: var(--custom-text-color);
}

.ai-chat {
    background-color: var(--ai-chat);
}

input.chatbot-input:not(.chatbot-input:focus) {
    border: 2px solid var(--color-primary) !important;
}

.share-overlay {
    background-color: var(--drag-opage);
}

.share-dialog {
    background-color: var(--ai-chat);
}

.close-product-overlay {
    background-color: var(--drag-opage);
}

.menu-selected {
    background-color: var(--color-blue-600);
    color: var(--custom-text-color);
}

.menu {
    background-color: var(--menu-bg);
}
.menu:hover {
    background-color: var(--menu-bg-hover);
}

.user-settings {
    background-color: var(--user-settings);
    color: var(--custom-text-color);
}
/*  bg-gray-100  dark:bg-gray-800 hover:bg-gray-300 dark:hover:bg-gray-700 */

input:not(#login-form input):not(#register-form input):not(
        #reset-password-form input
    ):not(#password-reset-form input):not(#reset-password-form input):not(
        #password-reset-form input
    ):not(#reset-password-form input):not(#password-reset-form input):not(
        #password-reset-form input
    ):not(#password-reset-form input):not(#password-reset-form input):not(
        #password-reset-form input
    ):not(#overlay-content input):not(.chatbot-input input):not(
        .close-product-overlay input
    ) {
    background-color: var(--drag);
}

/* System dark theme - only used for initial load */
@media (prefers-color-scheme: dark) {
    :root:not(.light):not(.light-mode):not(.dark):not(.dark-mode) {
        --background: #0a0a0a;
        --foreground: #ededed;
    }
}

body {
    color: var(--foreground);
    background: var(--background);

    input[type="text"],
    label {
        @apply placeholder:font-sans font-sans font-medium;
    }

    .font-saira {
        font-family: var(--font-saira);
    }
    .font-quicksand {
        font-family: var(--font-quicksand);
    }

    ::selection {
        background-color: #00000000;
    }
    input::selection {
        @apply bg-[#21ba97aa] text-[#000000];
    }
    input:not(.overlay input):not(#login-form input):not(
            #register-form input
        ):not(#reset-password-form input):not(#password-reset-form input),
    textarea:not(.overlay textarea),
    select {
        @apply border-2 transition-colors duration-200 border-transparent outline-0;
        &:focus {
            @apply border-[#21ba9c];
        }
    }

    button:not(.overlay button)
        :not(#site-logo a)
        :not(.shopping-list button)
        :not(#reset-password-form button)
        :not(#login-form button)
        :not(button#empty-list-add-btn)
        :not(.no-border),
    a:not(.overlay a)
        :not(a#site-logo)
        :not(#reset-password-form a)
        :not(#login-form a)
        :not(#empty-list-add-btn)
        :not(.user-settings button) {
        @apply border-2 transition-colors duration-200 hover:border-current border-transparent outline-0;
        &:focus {
            @apply border-[#21ba9c];
        }
    }
}

/* Add keyframes for the waving animation */
@keyframes wave {
    0%,
    100% {
        transform: rotate(0deg);
    }
    25% {
        transform: rotate(15deg);
    }
    75% {
        transform: rotate(-15deg);
    }
}

.wave-emoji {
    display: inline-block;
    animation: wave 3s infinite;
    transform-origin: 70% 70%;
}

@keyframes slideDown {
    from {
        transform: translateY(-80px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.new-list {
    @apply duration-200 ease-in-out border-2 border-green-500;
    animation: slideDown 0.5s ease-out;
}

input {
    transition: width 1s ease-in-out; /* Smooth transition for width */
}

input.expanded {
    width: 100%; /* Expand to full width */
}

/* Chrome, Safari, Edge */
input:-webkit-autofill,
input:-webkit-autofill:hover,
input:-webkit-autofill:focus,
textarea:-webkit-autofill,
select:-webkit-autofill {
    /* Prevent flicker on load */
    transition: background-color 9999s ease-out 0s;
    /* Text and caret color */
    -webkit-text-fill-color: #fff !important;
    caret-color: #fff;
}

/* Firefox */
input:-moz-autofill,
textarea:-moz-autofill,
select:-moz-autofill {
    box-shadow: 0 0 0px 1000px transparent inset !important;
    -moz-text-fill-color: #fff !important;
    caret-color: #fff;
}

.search-input {
    background-color: var(--search-input) !important;
}

.product-card {
    background-color: var(--product-item);
    color: var(--custom-text-color);
}
.product-card:hover {
    background-color: var(--product-item-hover);
}

.bg-brand-color {
    background-color: var(--color-primary);
}

.filters-wrapper {
    background-color: var(--filters-wrapper);
}

.filters {
    background-color: var(--filters);
    color: var(--filters-text);
    &:hover {
        background-color: var(--filters-hover);
    }
}

.chat-widget:hover {
    border: 2px solid var(--chat-widget-hover) !important;
}
